<HTML>

	<HEAD>
		<TITLE>BlockChain FIMT Project</TITLE>
	</HEAD>
	
	<link rel="stylesheet" href="frameworks/bootstrap/css/bootstrap.min.css">
	<link rel="stylesheet" href="frameworks/bootstrap/css/bootstrap-theme.min.css" >
	<link rel="stylesheet" href="css/normalize.css" >
	<link rel="stylesheet" href="css/animate.css" >
	<link rel="stylesheet" href="css/style.css" >

	<BODY class="smoothscroll enable-animation">
		<div id="wrapper">
			<header>
				<div class="navbar navbar-default" >
					<div class="container">
						<div class="navbar-header">
							<button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target=".navbar-collapse" aria-expanded="false" aria-controls="navbar">
								<span class="sr-only">Toggle navigation</span>
								<span class="icon-bar"></span>
								<span class="icon-bar"></span>
								<span class="icon-bar"></span>
							</button>
							<a class="navbar-brand"><img  src="img/fidelity_logo.png" alt="Fidelity" style="float:left"></a>
							<a class="navbar-brand text-muted" ><span class="navbar-header">Fidelity BlockChain Dashboard </span></a>
						</div>
						<div class="collapse navbar-collapse">

							<ul class="nav navbar-nav navbar-right">
								<li class="active"><a href="index">Home</a></li>
								<li class="dropdown">
									<a class="dropdown-toggle" data-toggle="dropdown">Transactions<span class="caret"></span></a>
									<ul class="dropdown-menu">
										<li><a href="createTransaction">Create</a></li>
										<li><a href="viewTransactions">View List</a></li>	
									</ul>
								</li>	
								<li class="dropdown">
									<a class="dropdown-toggle" data-toggle="dropdown">Assets<span class="caret"></span></a>
									<ul class="dropdown-menu">
										<li><a href="createAsset">Create</a></li>
										<li><a href="viewAsset">View List</a></li>	
									</ul>
								</li>	
								<li><a href="stats">Blockchain Stats</a></li>	
								<li><a href="about">About Us</a></li>
							</ul>

						</div>
					</div>
				</div>
			</header>
			<section class="carousel-section">
				<div id="carousel-blockchain" class="carousel carousel-razon slide" data-ride="carousel" data-interval="5000">
					<!-- Indicators -->
					<ol class="carousel-indicators">
						<li data-target="#carousel-blockchain" data-slide-to="0" class="active"></li>
						<li data-target="#carousel-blockchain" data-slide-to="1"></li>
						<li data-target="#carousel-blockchain" data-slide-to="2"></li>
						<li data-target="#carousel-blockchain" data-slide-to="3"></li>
					</ol>

					<!-- Wrapper for slides -->
					<div class="carousel-inner" role="listbox">

						<div class="item active">
							<div class="container">
								<div class="row">
									<div class="col-md-6 col-sm-7">
										<div class="carousel-caption">
											<div class="carousel-text">
												<h1 class="animated fadeInDownBig animation-delay-7 carousel-title">Fidelity Blockchain</h1>
												<h3 class="animated fadeInDownBig animation-delay-5  crousel-subtitle">Enables sharing of any digital property without the need of a trusted third party</h3>
												<ul class="list-unstyled carousel-list">
													<li class="animated bounceInLeft animation-delay-11"><img src="../img/tick.png" id="tick"> Faster</li>
													<li class="animated bounceInLeft animation-delay-13"><img src="../img/tick.png" id="tick"> Open Source</li>
													<li class="animated bounceInLeft animation-delay-15"><img src="../img/tick.png" id="tick"> Peer to Peer</li>
												</ul>
												<p class="animated fadeInUpBig animation-delay-17">Blockchain is a ledger of digital events distributed between many different systems. Each system has an individual copy of the ledger updated by consensus of participants.</p>
											</div>
										</div>
									</div>
									<div class="col-md-6 col-sm-5 hidden-xs carousel-img-wrap">
										<div class="carousel-img">
											<img src="../img/carousel_3.png" class="img-responsive animated bounceInUp animation-delay-3" alt="Image">
										</div>
									</div>
								</div>
							</div>
						</div>

						<div class="item">
							<div class="container">
								<div class="row">
									<div class="col-md-6 col-sm-7">
										<div class="carousel-caption">
											<div class="carousel-text">
												<h1 class="animated fadeInDownBig animation-delay-7 carousel-title">The Ledger</h1>
												<h3 class="animated fadeInDownBig animation-delay-5  crousel-subtitle">It is a list of blocks which form the blockchain.</h3>
												<ul class="list-unstyled carousel-list">
													<li class="animated bounceInLeft animation-delay-11"><img src="../img/tick.png" id="tick">Automatic Updation</li>
													<li class="animated bounceInLeft animation-delay-13"><img src="../img/tick.png" id="tick">Cryptographically Secure</li>
													<li class="animated bounceInLeft animation-delay-15"><img src="../img/tick.png" id="tick">Auditable</li>
												</ul>
												<p class="animated fadeInUpBig animation-delay-17">Ledger contains blocks of all the transactions accross the network. A local copy of ledger is stored at each system and can be used to monitor the network.</p>
											</div>
										</div>
									</div>
									<div class="col-md-6 col-sm-5 hidden-xs carousel-img-wrap">
										<div class="carousel-img">
											<img src="../img/carousel_2.png" class="img-responsive animated bounceInUp animation-delay-3" alt="Image">
										</div>
									</div>
								</div>
							</div>
						</div>

						<div class="item">
							<div class="container">
								<div class="row">
									<div class="col-md-6 col-sm-7">
										<div class="carousel-caption">
											<div class="carousel-text">
												<h1 class="animated fadeInDownBig animation-delay-7 carousel-title">Existing System</h1>
												<h3 class="animated fadeInDownBig animation-delay-5  crousel-subtitle">Uses end of day batch processing of feed files to maintain database at every system</h3>
												<ul class="list-unstyled carousel-list">
													<li class="animated bounceInLeft animation-delay-11"><img src="../img/tick.png" id="tick"> Time Consuming</li>
													<li class="animated bounceInLeft animation-delay-13"><img src="../img/tick.png" id="tick"> Chances of Error</li>
													<li class="animated bounceInLeft animation-delay-15"><img src="../img/tick.png" id="tick"> Central Authority required</li>
												</ul>
												<p class="animated fadeInUpBig animation-delay-17">End of day batch processing occours to ensure consistency of data in every system by the central authority. Feed files are sent from each BU and transactions are settled.</p>
											</div>
										</div>
									</div>
									<div class="col-md-6 col-sm-5 hidden-xs carousel-img-wrap">
										<div class="carousel-img">
											<img src="../img/carousel_5.png" class="img-responsive animated bounceInUp animation-delay-3" alt="Image">
										</div>
									</div>
								</div>
							</div>
						</div>

						<div class="item">
							<div class="container">
								<div class="row">
									<div class="col-md-6 col-sm-7">
										<div class="carousel-caption">
											<div class="carousel-text">
												<h1 class="animated fadeInDownBig animation-delay-7 carousel-title">Blockchain Solution</h1>
												<h3 class="animated fadeInDownBig animation-delay-5  crousel-subtitle">Uses blockchain to collaborate transactions between BU's to maintain consistency.</h3>
												<ul class="list-unstyled carousel-list">
													<li class="animated bounceInLeft animation-delay-11"><img src="../img/tick.png" id="tick"> Faster</li>
													<li class="animated bounceInLeft animation-delay-13"><img src="../img/tick.png" id="tick"> Transparent</li>
													<li class="animated bounceInLeft animation-delay-15"><img src="../img/tick.png" id="tick"> Synchronized</li>
												</ul>
												<p class="animated fadeInUpBig animation-delay-17">Eliminates the dependencies between the BUs and allows all the BUs to see the flow of assets and monitor its spending across the network.</p>
											</div>
										</div>
									</div>
									<div class="col-md-6 col-sm-5 hidden-xs carousel-img-wrap">
										<div class="carousel-img">
											<img src="../img/carousel_6.png" class="img-responsive animated bounceInUp animation-delay-3" alt="Image">
										</div>
									</div>
								</div>
							</div>
						</div>
					</div>

					<!-- Left and right controls -->
					<a class="left carousel-control" href="#carousel-blockchain" role="button" data-slide="prev">
						<span class="glyphicon glyphicon-chevron-left" aria-hidden="true"></span>
						<span class="sr-only">Previous</span>
					</a>
					<a class="right carousel-control" href="#carousel-blockchain" role="button" data-slide="next">
						<span class="glyphicon glyphicon-chevron-right" aria-hidden="true"></span>
						<span class="sr-only">Next</span>
					</a>
				</div>
			</section>

			<hr>


			<div class="container">
				<div class="row">
					<div class="col-md-6"  style="background-color:#ADDFAD;">
						<h2>Recently Issued Assets</h2>
						<div id="latest-assets">
							<!--<img src="../img/loading.gif" id="loading-logo" align="middle"> -->
						</div>
					</div>

					<div class="col-md-1"></div>
					<div class="col-md-5"  style="background-color:#ADDFAD;">
						<h2>Recently Issued Transactions</h2>
						<div id="latest-txs">
							
						</div>
					</div>
				</div> 
			</div>

			<br>
			<br>
			<br>

		</div>
		<footer>
			<div id="footer">
				<div class="container">
					<div class="span6">
						<p class="pull-right"><img src="img/footer_fid_logo.png" alt="Fidelity Investments"></p>
						<p><strong>For employee use only.</strong></p>
						<p>Unauthorized access to or use of this system is prohibited.</p>
						<p>All access and use may be monitored and recorded.</p>
						<p>To report an issue, contact us at +91 9600968059.</p>
					</div>
				</div>
			</div>
		</footer>


		<script type="text/javascript" src="frameworks/jquery/jquery-2.1.4.min.js"></script>
		<script type="text/javascript" src="frameworks/bootstrap/js/bootstrap.min.js" ></script>
		<script>

		$(document).ready(function($) {
			loadAssetsTable();
			loadTxsTable();
		});
		
		function loadAssetsTable(){
			var tableCounter = 0; // Counter variable to display only 20 table entries	
			var string = "<table class='table table-hover table-responsive'><tr><th>Account ID</th><th>Account Label</th><th>Asset Label</th><th>Amount</th></tr>";		
			$.get('/fetch_assets_list').then(function(d) {
				jQuery.each(d, function(i, val) {
					tableCounter++;
					var outputs =  val['outputs'];
					var time = $.trim(val['transaction_time']).substring(0,10)+" ";
					time += $.trim(val['transaction_time']).substring(11,19);
					string += "<tr><td>"+outputs[0]['account_id']+"</td><td>"+ outputs[0]['account_label'] +"</td><td>"+outputs[0]['asset_label']+"</td><td>"+outputs[0]['amount']+"</td></tr>";
					if(tableCounter == 8)
						return false;
				});
				string += "</table>";
				$('#latest-assets').html(string);
			});	
		}
		
		function loadTxsTable(){
				var entryCounter = 0;
				var string = "<table class='table table-hover table-striped table-responsive'><tr><th>Tx ID</th><th>Tx Time</th><th>Asset Label</th><th>Amount</th></tr>";
				$.get('/fetch_activity_list').then(function(d) {
					jQuery.each(d, function(i, val) {
						entryCounter++;
						var outputs =  val['outputs'];	
						var inputs = val['inputs'];
						var datetime = val['transaction_time'].substring(0,19).split("T");
						var date = datetime[0];
						var time =  datetime[1];
						var myDate = new Date(date + " " + time);
						var convertedDate = myDate.addHours(5.5);
						var nHrs = convertedDate.getHours();
						var nMin = convertedDate.getMinutes();
						var nSec = convertedDate.getSeconds();
						var nDate = convertedDate.getDate();
						var nMnth = convertedDate.getMonth() + 1;
						var nYear = convertedDate.getFullYear();
						string += "<tr><td>"+val['transaction_id'].substring(0,10)+"</td><td>"+ nDate+"-"+nMnth+"-"+nYear+" "+nHrs+":"+nMin+":"+nSec+"</td><td>"+outputs[0]['asset_label']+"</td><td>"+outputs[0]['amount']+"</td></tr>";
						if(entryCounter == 8)
							return false;
					});
					string += "</table>";
					$('#latest-txs').html(string);
				});	
		}
		
		Date.prototype.addHours = function(h) {    
			   this.setTime(this.getTime() + (h*60*60*1000)); 
			   return this;   
		}

		</script>

	</BODY>

</HTML>